var k,q=this;function r(){}
function aa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==
b&&"undefined"==typeof a.call)return"object";return b}function s(a){return"array"==aa(a)}function t(a){return"string"==typeof a}var ba="closure_uid_"+(1E9*Math.random()>>>0),ca=0;function da(a,b,c){return a.call.apply(a.bind,arguments)}
function ea(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function u(a,b,c){u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?da:ea;return u.apply(null,arguments)}
function x(a,b){function c(){}c.prototype=b.prototype;a.qa=b.prototype;a.prototype=new c};function y(a){Error.captureStackTrace?Error.captureStackTrace(this,y):this.stack=Error().stack||"";a&&(this.message=String(a))}x(y,Error);function fa(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c};var z=Array.prototype,ga=z.indexOf?function(a,b,c){return z.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(t(a))return t(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ha=z.some?function(a,b,c){return z.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=t(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function ia(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};function ja(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function A(a){var b={},c;for(c in a)b[c]=a[c];return b}var ka="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function la(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<ka.length;f++)c=ka[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function ma(a){var b=arguments.length;if(1==b&&s(arguments[0]))return ma.apply(null,arguments[0]);if(b%2)throw Error("Uneven number of arguments");for(var c={},d=0;d<b;d+=2)c[arguments[d]]=arguments[d+1];return c};var B,C,D,na;function oa(){return q.navigator?q.navigator.userAgent:null}na=D=C=B=!1;var E;if(E=oa()){var ra=q.navigator;B=0==E.lastIndexOf("Opera",0);C=!B&&(-1!=E.indexOf("MSIE")||-1!=E.indexOf("Trident"));D=!B&&-1!=E.indexOf("WebKit");na=!B&&!D&&!C&&"Gecko"==ra.product}var sa=B,F=C,G=na,H=D;function ta(){var a=q.document;return a?a.documentMode:void 0}var I;
a:{var J="",K;if(sa&&q.opera)var ua=q.opera.version,J="function"==typeof ua?ua():ua;else if(G?K=/rv\:([^\);]+)(\)|;)/:F?K=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:H&&(K=/WebKit\/(\S+)/),K)var va=K.exec(oa()),J=va?va[1]:"";if(F){var wa=ta();if(wa>parseFloat(J)){I=String(wa);break a}}I=J}var xa={};
function L(a){var b;if(!(b=xa[a])){b=0;for(var c=String(I).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",l=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var m=l.exec(g)||["","",""],p=n.exec(h)||["","",""];if(0==m[0].length&&0==p[0].length)break;b=((0==m[1].length?0:parseInt(m[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==m[1].length?0:parseInt(m[1],
10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==m[2].length)<(0==p[2].length)?-1:(0==m[2].length)>(0==p[2].length)?1:0)||(m[2]<p[2]?-1:m[2]>p[2]?1:0)}while(0==b)}b=xa[a]=0<=b}return b}var ya=q.document,za=ya&&F?ta()||("CSS1Compat"==ya.compatMode?parseInt(I,10):5):void 0;function Aa(a){return function(){throw a;}};!G&&!F||F&&F&&9<=za||G&&L("1.9.1");F&&L("9");function Ba(a,b){ja(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Ca?a.setAttribute(Ca[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Ca={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function M(a,b){this.L=[];this.la=b||null;this.C=this.G=!1;this.K=void 0;this.ha=this.ja=this.O=!1;this.N=0;this.T=null;this.ka=0;this.P=null;if(Error.captureStackTrace){var c={stack:""};Error.captureStackTrace(c,M);"string"==typeof c.stack&&(this.P=c.stack.replace(/^[^\n]*\n/,""))}}M.prototype.Y=function(a,b){this.O=!1;N(this,a,b)};function N(a,b,c){a.G=!0;a.K=c;a.C=!b;Da(a)}function Ea(a){if(a.G){if(!a.ha)throw new Fa;a.ha=!1}}
function Ga(a,b){var c;if(c=a.P)c=typeof b,c=("object"==c&&null!=b||"function"==c)&&b.stack&&/^[^\n]+(\n   [^\n]+)+/.test(b.stack);c&&(b.stack=b.stack+"\nDEFERRED OPERATION:\n"+a.P)}function Ha(a){return ha(a.L,function(a){return"function"==aa(a[1])})}
function Da(a){a.N&&a.G&&Ha(a)&&(q.clearTimeout(a.N),delete a.N);a.T&&(a.T.ka--,delete a.T);for(var b=a.K,c=!1,d=!1;a.L.length&&!a.O;){var e=a.L.shift(),f=e[0],g=e[1],e=e[2];if(f=a.C?g:f)try{var h=f.call(e||a.la,b);void 0!==h&&(a.C=a.C&&(h==b||h instanceof Error),a.K=b=h);b instanceof M&&(d=!0,a.O=!0)}catch(l){b=l,a.C=!0,Ga(a,b),Ha(a)||(c=!0)}}a.K=b;d&&(d=b,h=u(a.Y,a,!0),f=u(a.Y,a,!1),d.L.push([h,f,void 0]),d.G&&Da(d),b.ja=!0);c&&(a.N=q.setTimeout(Aa(b),0))}function Fa(){y.call(this)}x(Fa,y);
Fa.prototype.message="Deferred has already fired";function Ia(a){var b={},c=b.document||document,d=document.createElement("SCRIPT"),e={ua:d,ra:void 0},f=new M(0,e),g=null,h=null!=b.timeout?b.timeout:5E3;0<h&&(g=window.setTimeout(function(){Ja(d,!0);var b=new Ka(La,"Timeout reached for loading script "+a);Ea(f);Ga(f,b);N(f,!1,b)},h),e.ra=g);d.onload=d.onreadystatechange=function(){d.readyState&&"loaded"!=d.readyState&&"complete"!=d.readyState||(Ja(d,b.sa||!1,g),Ea(f),N(f,!0,null))};d.onerror=function(){Ja(d,!0,g);var b=new Ka(Ma,"Error while loading script "+
a);Ea(f);Ga(f,b);N(f,!1,b)};Ba(d,{type:"text/javascript",charset:"UTF-8",src:a});Na(c).appendChild(d)}function Na(a){var b=a.getElementsByTagName("HEAD");return b&&0!=b.length?b[0]:a.documentElement}function Ja(a,b,c){null!=c&&q.clearTimeout(c);a.onload=r;a.onerror=r;a.onreadystatechange=r;b&&window.setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a)},0)}var Ma=0,La=1;function Ka(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=": "+b);y.call(this,c);this.code=a}x(Ka,y);function O(){0!=Oa&&(this[ba]||(this[ba]=++ca))}var Oa=0;function P(a,b){this.type=a;this.currentTarget=this.target=b}P.prototype.s=!1;P.prototype.defaultPrevented=!1;P.prototype.fa=!0;P.prototype.preventDefault=function(){this.defaultPrevented=!0;this.fa=!1};function Pa(a,b){P.call(this,a);this.oa=b}x(Pa,P);function Qa(a){this.id=a.id;this.view={id:a.id,title:a.title,isRTL:"rtl"==a.direction,is102:!!a.is102Keyboard,mappings:ma(["",null,"s",null,"c",null,"l",null,"sc",null,"cl",null,"sl",null,"scl",null])};this.w=this.n=null;var b=this.view.is102?"\u00c01234567890\u00bd\u00bbQWERTYUIOP\u00db\u00ddASDFGHJKL\u00ba\u00de\u00dc\u00e2ZXCVBNM\u00bc\u00be\u00bf ":"\u00c01234567890\u00bd\u00bbQWERTYUIOP\u00db\u00dd\u00dcASDFGHJKL\u00ba\u00deZXCVBNM\u00bc\u00be\u00bf ",c=a.mappings,d;for(d in c){var e=c[d],f=
d.split(/,/);f.join(",")!=d&&f.push("");var g={},h;for(h in e){var l=e[h];if(""==h&&(h=b,this.view.is102))var n=l.slice(0,25),n=n+l.slice(26,37),n=n+l.charAt(25),l=n+=l.slice(37);h=h.replace("m","\u00bd");h=h.replace("=","\u00bb");h=h.replace(";","\u00ba");if(1==h.length)g[h]=["S",l,l];else for(var m=0,n=0,p;p=h.charAt(n);++n){var v=l.charAt(m++);if(v==l.charAt(m)&&"{"==v){v=l.indexOf("}}",m);if(v<m)break;var m=l.slice(m+1,v),pa=m.split("||");3==pa.length?g[p]=pa:1==pa.length&&(g[p]=["S",m,m]);m=
v+2}else g[p]=["S",v,v]}}for(var n=0,qa;qa=f[n],void 0!=qa;++n)this.view.mappings[qa]=g}if(d=a.transform){var b=[],e=[],c=[],f=1,w;for(w in d)b[f]=[RegExp(w+"$"),d[w]],e.push("("+w+"$)"),c.push("^("+Ra(w)+")"),g=RegExp(w+"|.*").exec("").length,f+=g;w=RegExp(e.join("|"));d=RegExp(c.join("|"));c=RegExp(c.reverse().join("|"));this.n=[w,b,d,c]}if(a=a.historyPruneRegex)this.w=RegExp("^("+a+")$")}
function Ra(a){a=a.replace(/\\./g,function(a){return/^\\\[/.test(a)?"\u0001":/^\\\]/.test(a)?"\u0002":a});a=a.replace(/\\.|\[[^\[\]]*\]|\{.*\}|[^\|\\\(\)\[\]\{\}\*\+\?]/g,function(a){return/^\{/.test(a)?a:"(?:"+a+"|$)"});a=a.replace(/\u0001/g,"\\[");return a=a.replace(/\u0002/g,"\\]")}
function Sa(a,b){if(!a.n||!b)return-1;for(var c=0;c<b.length;c++){var d=b.slice(c-b.length),e=d.match(a.n[2]);if(e&&e[0]){for(var f=1;f<e.length&&!e[f];f++);var g=f;if((e=d.match(a.n[3]))&&e[0]){for(f=1;f<e.length&&!e[f];f++);if(g!=e.length-f)return c;e=a.n[1][g][0];e=RegExp(e.toString().match(/\/(.*)\//)[1]+"\u0001");if(!(d+"\u0001").match(e))return c}}}return-1}
Qa.prototype.transform=function(a,b,c){if(!this.n)return null;a=0<b?a.slice(0,b)+"\u001d"+a.slice(b)+c:a+c;if(b=this.n[0].exec(a)){for(var d=this.n[1],e=1;e<b.length&&!b[e];e++);b=d[e][0];var d=d[e][1],e=b.exec(a),f=a.slice(e.index),g=-1<f.search("\u001d")?1:0;c=f.length-g-c.length;a=a.replace(b,d).slice(e.index);a=a.replace("\u001d","");return{back:c,q:a}}return null};var Ta="closure_listenable_"+(1E6*Math.random()|0);function Ua(a){try{return!(!a||!a[Ta])}catch(b){return!1}}var Va=0;function Wa(a,b,c,d,e){this.r=a;this.J=null;this.src=b;this.type=c;this.capture=!!d;this.I=e;this.key=++Va;this.u=this.D=!1}function Xa(a){a.u=!0;a.r=null;a.J=null;a.src=null;a.I=null};function Q(a){this.src=a;this.h={};this.M=0}Q.prototype.add=function(a,b,c,d,e){var f=this.h[a];f||(f=this.h[a]=[],this.M++);var g=Ya(f,b,d,e);-1<g?(a=f[g],c||(a.D=!1)):(a=new Wa(b,this.src,a,!!d,e),a.D=c,f.push(a));return a};Q.prototype.remove=function(a,b,c,d){if(!(a in this.h))return!1;var e=this.h[a];b=Ya(e,b,c,d);return-1<b?(Xa(e[b]),z.splice.call(e,b,1),0==e.length&&(delete this.h[a],this.M--),!0):!1};
function Za(a,b){var c=b.type;if(c in a.h){var d=a.h[c],e=ga(d,b),f;(f=0<=e)&&z.splice.call(d,e,1);f&&(Xa(b),0==a.h[c].length&&(delete a.h[c],a.M--))}}Q.prototype.B=function(a,b,c,d){a=this.h[a];var e=-1;a&&(e=Ya(a,b,c,d));return-1<e?a[e]:null};function Ya(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.u&&f.r==b&&f.capture==!!c&&f.I==d)return e}return-1};var $a=!F||F&&9<=za,ab=F&&!L("9");!H||L("528");G&&L("1.9b")||F&&L("8")||sa&&L("9.5")||H&&L("528");G&&!L("8")||F&&L("9");function bb(a){bb[" "](a);return a}bb[" "]=r;function R(a,b){if(a){var c=this.type=a.type;P.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(G){var e;a:{try{bb(d.nodeName);e=!0;break a}catch(f){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=H||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=H||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:
a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.$=a;a.defaultPrevented&&this.preventDefault();delete this.s}}x(R,P);k=R.prototype;k.target=null;k.relatedTarget=null;k.offsetX=0;k.offsetY=0;k.clientX=0;k.clientY=0;k.screenX=0;k.screenY=0;k.button=0;k.keyCode=0;k.charCode=0;
k.ctrlKey=!1;k.altKey=!1;k.shiftKey=!1;k.metaKey=!1;k.$=null;k.preventDefault=function(){R.qa.preventDefault.call(this);var a=this.$;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,ab)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var cb="closure_lm_"+(1E6*Math.random()|0),S={},db=0;function eb(a,b,c,d,e){if(s(b)){for(var f=0;f<b.length;f++)eb(a,b[f],c,d,e);return null}c=fb(c);if(Ua(a))a=a.R(b,c,d,e);else{if(!b)throw Error("Invalid event type");var f=!!d,g=T(a);g||(a[cb]=g=new Q(a));c=g.add(b,c,!1,d,e);c.J||(d=gb(),c.J=d,d.src=a,d.r=c,a.addEventListener?a.addEventListener(b,d,f):a.attachEvent(b in S?S[b]:S[b]="on"+b,d),db++);a=c}return a}
function gb(){var a=hb,b=$a?function(c){return a.call(b.src,b.r,c)}:function(c){c=a.call(b.src,b.r,c);if(!c)return c};return b}function ib(a,b,c,d,e){if(s(b))for(var f=0;f<b.length;f++)ib(a,b[f],c,d,e);else c=fb(c),Ua(a)?a.U(b,c,d,e):a&&(a=T(a))&&(b=a.B(b,c,!!d,e))&&jb(b)}
function jb(a){if("number"!=typeof a&&a&&!a.u){var b=a.src;if(Ua(b))Za(b.t,a);else{var c=a.type,d=a.J;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent&&b.detachEvent(c in S?S[c]:S[c]="on"+c,d);db--;(c=T(b))?(Za(c,a),0==c.M&&(c.src=null,b[cb]=null)):Xa(a)}}}function kb(a,b,c,d){var e=1;if(a=T(a))if(b=a.h[b])for(b=ia(b),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.u&&(e&=!1!==lb(f,d))}return Boolean(e)}
function lb(a,b){var c=a.r,d=a.I||a.src;a.D&&jb(a);return c.call(d,b)}
function hb(a,b){if(a.u)return!0;if(!$a){var c;if(!(c=b))a:{c=["window","event"];for(var d=q,e;e=c.shift();)if(null!=d[e])d=d[e];else{c=null;break a}c=d}e=c;c=new R(e,this);d=!0;if(!(0>e.keyCode||void 0!=e.returnValue)){a:{var f=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(g){f=!0}if(f||void 0==e.returnValue)e.returnValue=!0}e=[];for(f=c.currentTarget;f;f=f.parentNode)e.push(f);for(var f=a.type,h=e.length-1;!c.s&&0<=h;h--)c.currentTarget=e[h],d&=kb(e[h],f,!0,c);for(h=0;!c.s&&h<e.length;h++)c.currentTarget=
e[h],d&=kb(e[h],f,!1,c)}return d}return lb(a,new R(b,this))}function T(a){a=a[cb];return a instanceof Q?a:null}var mb="__closure_events_fn_"+(1E9*Math.random()>>>0);function fb(a){return"function"==aa(a)?a:a[mb]||(a[mb]=function(b){return a.handleEvent(b)})};function U(){O.call(this);this.t=new Q(this);this.ia=this}x(U,O);U.prototype[Ta]=!0;k=U.prototype;k.ea=null;k.addEventListener=function(a,b,c,d){eb(this,a,b,c,d)};k.removeEventListener=function(a,b,c,d){ib(this,a,b,c,d)};
k.dispatchEvent=function(a){var b,c=this.ea;if(c)for(b=[];c;c=c.ea)b.push(c);var c=this.ia,d=a.type||a;if(t(a))a=new P(a,c);else if(a instanceof P)a.target=a.target||c;else{var e=a;a=new P(d,c);la(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.s&&0<=g;g--)f=a.currentTarget=b[g],e=nb(f,d,!0,a)&&e;a.s||(f=a.currentTarget=c,e=nb(f,d,!0,a)&&e,a.s||(e=nb(f,d,!1,a)&&e));if(b)for(g=0;!a.s&&g<b.length;g++)f=a.currentTarget=b[g],e=nb(f,d,!1,a)&&e;return e};
k.R=function(a,b,c,d){return this.t.add(String(a),b,!1,c,d)};k.U=function(a,b,c,d){return this.t.remove(String(a),b,c,d)};function nb(a,b,c,d){b=a.t.h[String(b)];if(!b)return!0;b=ia(b);for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.u&&g.capture==c){var h=g.r,l=g.I||g.src;g.D&&Za(a.t,g);e=!1!==h.call(l,d)&&e}}return e&&!1!=d.fa}k.B=function(a,b,c,d){return this.t.B(String(a),b,c,d)};function ob(){U.call(this);this.p={};this.A=this.o="";this.m={f:{text:"",c:-1},d:"",b:{text:"",c:-1}};var a=u(this.S,this),b=["cros_vk_loadme"],c=q;b[0]in c||!c.execScript||c.execScript("var "+b[0]);for(var d;b.length&&(d=b.shift());)b.length||void 0===a?c=c[d]?c[d]:c[d]={}:c[d]=a}x(ob,U);function pb(a,b){if(b&&a.o!=b){var c=a.p[b];c?(a.o=b,a.A="",qb(a)):!1==c&&(a.A=b)}}
ob.prototype.translate=function(a,b){if(!this.o||!a)return null;var c=this.p[this.o];if(!c)return null;rb(this,b);var d,e=this.m;e.d&&(d=c.transform(e.f.text,e.f.c,e.d+a))&&0>d.back&&(d=null);if(d){var f=e.f.text,f=f.slice(0,f.length-d.back),f=f+d.q;d.back=e.b.text.length;d.q=f}else d=c.transform(e.b.text,e.b.c,a);c.w&&c.w.exec(e.d+a)?(e.d||(e.f=A(e.b)),e.d+=a):c.w&&c.w.exec(a)?(e.f=A(e.b),e.d=a):(e.f.text="",e.f.c=-1,e.d="");c=e.b.text;f=e.b.c;d?(c=c.slice(0,c.length-d.back),c+=d.q,f=c.length):(c+=
a,d={back:0,q:a});var g=c.lastIndexOf(" ");0<=g&&(c=c.slice(g+1),f=f>g?f-(g+1):-1);e.b.text=c;e.b.c=f;return d};function sb(a){a=a.p[a.o];return!!a&&!!a.n}ob.prototype.S=function(a){var b=new Qa(a);b.id&&(this.p[b.id]=b);this.A==a.id&&(pb(this,this.A),this.A="");this.dispatchEvent(new Pa("lld",b))};function rb(a,b){var c=a.m.b.text;c&&b&&(fa(b,c)||fa(c,b))||qb(a)}function qb(a){a.m.d="";a.m.f={text:"",c:-1};a.m.b=A(a.m.f)}
function tb(a,b){function c(a){a.text=a.text.slice(b);0<a.c&&(a.c-=b,0>=a.c&&(a.c=-1))}c(a.m.f);c(a.m.b)};function V(a){O.call(this);this.ba=a;this.da={}}x(V,O);var ub=[];V.prototype.R=function(a,b,c,d,e){s(b)||(ub[0]=b,b=ub);for(var f=0;f<b.length;f++){var g=eb(a,b[f],c||this.handleEvent,d||!1,e||this.ba||this);if(!g)break;this.da[g.key]=g}return this};V.prototype.U=function(a,b,c,d,e){if(s(b))for(var f=0;f<b.length;f++)this.U(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.ba||this,c=fb(c),d=!!d,b=Ua(a)?a.B(b,c,d,e):a?(a=T(a))?a.B(b,c,d,e):null:null,b&&(jb(b),delete this.da[b.key]);return this};
V.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function W(){this.H=[]}W.aa=function(){return W.ca?W.ca:W.ca=new W};function vb(a){W.aa().H.push(a)}function wb(){for(var a=W.aa(),b=0;b<a.H.length;b++)a.H[b].call();a.H=[]};function X(a,b){vb(function(){chrome.input.ime.commitText({contextID:a,text:b})})}function xb(a,b,c){vb(function(){chrome.input.ime.setComposition({contextID:a,text:b,cursor:c})})}function yb(a,b,c,d){vb(function(){chrome.input.ime.deleteSurroundingText({engineID:a,contextID:b,offset:-c,length:c},function(){chrome.input.ime.commitText({contextID:b,text:d})})})};function Y(a){this.l=a}Y.prototype.e="";Y.prototype.Z="";Y.prototype.ga=function(a){this.l=a};Y.prototype.reset=r;function zb(a){this.l=a}x(zb,Y);zb.prototype.commitText=function(a,b){if(1==b&&""==a)return!1;0<b?yb(this.Z,this.l.contextID,b,a):X(this.l.contextID,a);this.e=this.e.slice(0,-b)+a;return!0};function Ab(a,b){this.l=a;this.i=b;this.pa=RegExp("((?:A(?:NA?)+)|(?:(?:AN*)+S))$".replace(/N/g,"[\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962\u0963\u0981\u09bc\u09c1-\u09c4\u09cd\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b62\u0b63\u0b82\u0bc0\u0bcd\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc6\u0ccc\u0ccd\u0ce2\u0ce3\u0d41-\u0d44\u0d4d\u0d62\u0d63\u0dca\u0dd2-\u0dd4\u0dd6\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1bab\u1be6\u1be8\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u3099\u309a\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaec\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f]").replace(/S/g,
"[\u0488\u0489\u0903\u093b\u093e-\u0940\u0949-\u094c\u094e\u094f\u0982\u0983\u09be-\u09c0\u09c7\u09c8\u09cb\u09cc\u09d7\u0a03\u0a3e-\u0a40\u0a83\u0abe-\u0ac0\u0ac9\u0acb\u0acc\u0b02\u0b03\u0b3e\u0b40\u0b47\u0b48\u0b4b\u0b4c\u0b57\u0bbe\u0bbf\u0bc1\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcc\u0bd7\u0c01-\u0c03\u0c41-\u0c44\u0c82\u0c83\u0cbe\u0cc0-\u0cc4\u0cc7\u0cc8\u0cca\u0ccb\u0cd5\u0cd6\u0d02\u0d03\u0d3e-\u0d40\u0d46-\u0d48\u0d4a-\u0d4c\u0d57\u0d82\u0d83\u0dcf-\u0dd1\u0dd8-\u0ddf\u0df2\u0df3\u0f3e\u0f3f\u0f7f\u102b\u102c\u1031\u1038\u103b\u103c\u1056\u1057\u1062-\u1064\u1067-\u106d\u1083\u1084\u1087-\u108c\u108f\u109a-\u109c\u17b6\u17be-\u17c5\u17c7\u17c8\u1923-\u1926\u1929-\u192b\u1930\u1931\u1933-\u1938\u19b0-\u19c0\u19c8\u19c9\u1a19-\u1a1b\u1a55\u1a57\u1a61\u1a63\u1a64\u1a6d-\u1a72\u1b04\u1b35\u1b3b\u1b3d-\u1b41\u1b43\u1b44\u1b82\u1ba1\u1ba6\u1ba7\u1baa\u1bac\u1bad\u1be7\u1bea-\u1bec\u1bee\u1bf2\u1bf3\u1c24-\u1c2b\u1c34\u1c35\u1ce1\u1cf2\u1cf3\u20dd-\u20e0\u20e2-\u20e4\u302e\u302f\ua670-\ua672\ua823\ua824\ua827\ua880\ua881\ua8b4-\ua8c3\ua952\ua953\ua983\ua9b4\ua9b5\ua9ba\ua9bb\ua9bd-\ua9c0\uaa2f\uaa30\uaa33\uaa34\uaa4d\uaa7b\uaaeb\uaaee\uaaef\uaaf5\uabe3\uabe4\uabe6\uabe7\uabe9\uabea]").replace(/A/g,
"[^\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962\u0963\u0981\u09bc\u09c1-\u09c4\u09cd\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b62\u0b63\u0b82\u0bc0\u0bcd\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc6\u0ccc\u0ccd\u0ce2\u0ce3\u0d41-\u0d44\u0d4d\u0d62\u0d63\u0dca\u0dd2-\u0dd4\u0dd6\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1bab\u1be6\u1be8\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u3099\u309a\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaec\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\u0488\u0489\u0903\u093b\u093e-\u0940\u0949-\u094c\u094e\u094f\u0982\u0983\u09be-\u09c0\u09c7\u09c8\u09cb\u09cc\u09d7\u0a03\u0a3e-\u0a40\u0a83\u0abe-\u0ac0\u0ac9\u0acb\u0acc\u0b02\u0b03\u0b3e\u0b40\u0b47\u0b48\u0b4b\u0b4c\u0b57\u0bbe\u0bbf\u0bc1\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcc\u0bd7\u0c01-\u0c03\u0c41-\u0c44\u0c82\u0c83\u0cbe\u0cc0-\u0cc4\u0cc7\u0cc8\u0cca\u0ccb\u0cd5\u0cd6\u0d02\u0d03\u0d3e-\u0d40\u0d46-\u0d48\u0d4a-\u0d4c\u0d57\u0d82\u0d83\u0dcf-\u0dd1\u0dd8-\u0ddf\u0df2\u0df3\u0f3e\u0f3f\u0f7f\u102b\u102c\u1031\u1038\u103b\u103c\u1056\u1057\u1062-\u1064\u1067-\u106d\u1083\u1084\u1087-\u108c\u108f\u109a-\u109c\u17b6\u17be-\u17c5\u17c7\u17c8\u1923-\u1926\u1929-\u192b\u1930\u1931\u1933-\u1938\u19b0-\u19c0\u19c8\u19c9\u1a19-\u1a1b\u1a55\u1a57\u1a61\u1a63\u1a64\u1a6d-\u1a72\u1b04\u1b35\u1b3b\u1b3d-\u1b41\u1b43\u1b44\u1b82\u1ba1\u1ba6\u1ba7\u1baa\u1bac\u1bad\u1be7\u1bea-\u1bec\u1bee\u1bf2\u1bf3\u1c24-\u1c2b\u1c34\u1c35\u1ce1\u1cf2\u1cf3\u20dd-\u20e0\u20e2-\u20e4\u302e\u302f\ua670-\ua672\ua823\ua824\ua827\ua880\ua881\ua8b4-\ua8c3\ua952\ua953\ua983\ua9b4\ua9b5\ua9ba\ua9bb\ua9bd-\ua9c0\uaa2f\uaa30\uaa33\uaa34\uaa4d\uaa7b\uaaeb\uaaee\uaaef\uaaf5\uabe3\uabe4\uabe6\uabe7\uabe9\uabea]"))}
x(Ab,Y);function Bb(a,b){xb(a.l.contextID,b,b.length);a.e=b}
Ab.prototype.commitText=function(a,b){var c=!!this.e;if(!c&&(1==b&&!a||0==b&&" "==a))return!1;if(c&&" "==a&&0==b)return X(this.l.contextID,this.e+" "),this.e=this.e="",!0;a=this.e.slice(0,this.e.length-b)+a;if(!a)return Bb(this,a),!0;a:{var d=this.i;if(d.o&&d.p[d.o]){var c=d.p[d.o],e=d.m,f;if(e.d&&(f=e.f.text,d=e.f.c,f=0<d?f.slice(0,d)+"\u001d"+f.slice(d)+e.d:f+e.d,0<=Sa(c,f))){c=0;break a}f=e.b.text;d=e.b.c;0<=d&&(f=f.slice(0,d)+"\u001d"+f.slice(d));c=Sa(c,f);0<=d&&c>d&&c--}else c=-1}0<c&&(d=a.slice(0,
c+1),(e=this.pa.exec(d))&&(c=d.length-e[0].length));0>c?(X(this.l.contextID,a),this.e="",qb(this.i)):0==c?Bb(this,a):(X(this.l.contextID,a.slice(0,c)),Bb(this,a.slice(c)),tb(this.i,c));return!0};Ab.prototype.reset=function(){this.e&&(X(this.l.contextID,this.e),this.e="")};function Z(){O.call(this);this.i=new ob;this.ma=new V(this);this.ma.R(this.i,"lld",this.S);var a=this;chrome.runtime.onConnect.addListener(function(b){a.g=b;a.k&&b.postMessage({type:"layout",layout:a.k.view});b.onMessage.addListener(u(a.na,a))});chrome.windows.onRemoved.addListener(function(){a.g&&(a.g.disconnect(),a.v=0,a.g=null)})}x(Z,O);k=Z.prototype;k.g=null;k.j=null;k.F=null;k.a=0;k.k=null;k.Q="";k.v=0;var $={};
Z.prototype.na=function(a){var b=a.type;if("click"==b&&this.g){a=a[b];b=this.a;switch(a){case 16:this.a&1&&(this.a|=256,this.a&=-2);this.a^=256;break;case 273:this.a&$.V&&this.a&$.W&&(this.a|=512,this.a&=~($.V|$.W));this.a^=512;break;case 20:this.a^=4;break;default:Cb(this,a),wb()}this.a!=b&&this.g.postMessage({type:"state",state:Db(this)})}};function Eb(a,b,c){var d=a.a;a.a=c?a.a|b:a.a&~b;d!=a.a&&a.g&&a.g.postMessage({type:"state",state:Db(a)})}
function Fb(a){a.F&&a.k&&(a.j=sb(a.i)?new Ab(a.F,a.i):new zb(a.F),a.j.Z=a.Q)}Z.prototype.ga=function(a){this.F=a;Fb(this)};function Gb(a){0<a.v||chrome.windows.create({url:"view.html",width:535,height:230,type:"panel"},function(b){a.v=b.id})}Z.prototype.S=function(a){this.k=a.oa;pb(this.i,this.k.id);Fb(this);this.g&&this.k&&this.g.postMessage({type:"layout",layout:this.k.view})};function Db(a){var b="";if(a.a&1||a.a&256)b+="s";if(a.a&2||a.a&512)b+="c";a.a&4&&(b+="l");return b}
function Cb(a,b){var c=null,d=String.fromCharCode(b),e=Db(a),f=a.k.view.mappings,g=a.k.view.is102;if(!f[e])return!1;(e=f[e][d])&&(c=e[2]);c||32!=b||(c=" ");c||(c=0<=(g?"\u00c01234567890\u00bd\u00bbQWERTYUIOP\u00db\u00ddASDFGHJKL\u00ba\u00de\u00dc\u00e2ZXCVBNM\u00bc\u00be\u00bf ":"\u00c01234567890\u00bd\u00bbQWERTYUIOP\u00db\u00dd\u00dcASDFGHJKL\u00ba\u00deZXCVBNM\u00bc\u00be\u00bf ").indexOf(d)?"":null);if(""==c)return!0;if(null==c&&8!=b)return!1;d={back:1,q:""};if(sb(a.i))if(g=a.j.e,8==b)if(c=a.i,
rb(c,g),c=c.m,g=c.b.text){g=g.slice(0,g.length-1);c.b.text=g;c.b.c>g.length&&(c.b.c=g.length);if(g=c.d)c.d=g.slice(0,g.length-1);c.d||(c.f={text:"",c:-1})}else c.f={text:"",c:-1},c.d="",c.b=A(c.f);else d=a.i.translate(c,g);else c&&(d={back:0,q:c});return a.j.commitText(d.q,d.back)};var Hb={BackQuote:"\u00c0",Minus:"\u00bd",Equal:"\u00bb",Backspace:"\b",BracketLeft:"\u00db",BracketRight:"\u00dd",BlacketRight:"\u00dd",Backslash:"\u00dc",Semicolon:"\u00ba",Quote:"\u00de",Comma:"\u00bc",Period:"\u00be",Slash:"\u00bf",Space:" "};
(function(){var a=new Z;chrome.input.ime.onActivate.addListener(function(b){window.console.log("onActive: "+b);if(b){var c=b.match(/^vkd_([^\-]*)/);if(c&&(a.Q=b,b=a.i,c=c[1])){var f=b.p[c];void 0==f?(b.p[c]=!1,Ia("layouts/"+c+".js")):f&&b.dispatchEvent(new Pa("lld",f))}}});chrome.input.ime.onDeactivated.addListener(function(b){window.console.log("onDeactive: "+b);a.Q="";a.k=null;a.a=0;Eb(a,2,!1);0!=a.v&&(chrome.windows.remove(a.v),a.v=0)});chrome.input.ime.onFocus.addListener(function(b){a.ga(b)});
chrome.input.ime.onBlur.addListener(function(){});var b=chrome.input.ime.onReset;b&&b.addListener(function(){a.j&&(a.j.e="")});chrome.input.ime.onSurroundingTextChanged.addListener(function(b,c){var f=c.text.slice(0,Math.min(c.focus,c.anchor));a.j&&a.j instanceof zb&&(a.j.e=f.slice(-20))});var c=!1;chrome.input.ime.onKeyEvent.addListener(function(b,e){var f=!1,g="keydown"==e.type,h=e.code;if(g){if(e.altKey&&e.ctrlKey&&e.shiftKey)return"KeyV"==h?c=!0:(c&&"KeyK"==h&&Gb(a),c=!1),f;c=!1}if("AltRight"==
h)Eb(a,2,g);else if(/^Shift/.test(h))Eb(a,1,g);else if(g){g=new P(e.type);g.ta=!0;g.keyCode=g.charCode=0;g.altKey=e.altKey;g.ctrlKey=e.ctrlKey;g.shiftKey=e.shiftKey;g.X=e.capsLock;g.charCode=1==e.key.length?e.key.charCodeAt(0):0;var l=e.code;if(0==l.indexOf("Key"))g.keyCode=l.charCodeAt(3);else if(0==l.indexOf("Digit"))g.keyCode=l.charCodeAt(5);else if(l=Hb[l])g.keyCode=l.charCodeAt(0);g=0==g.keyCode?null:g;(l=!g)||(l=g.ctrlKey)||!(l=g.altKey)||(l=!(a.a&2));if(l)h.indexOf("Shift")&&h.indexOf("Alt")&&
a.j&&a.j.reset();else{if(a.j&&a.k){f=a.a&772;if(20==g.keyCode)f|=4;else if(void 0!=g.X)f=g.X?f|4:f&-5;else if(h=String.fromCharCode(g.charCode),g.shiftKey&&/[a-z]/.test(h)||!g.shiftKey&&/[A-Z]/.test(h))f|=4;if(16==g.keyCode||g.shiftKey)f|=1;if(18==g.keyCode||g.altKey)f|=$.V;if(17==g.keyCode||g.ctrlKey)f|=$.W;a.a!=f&&(a.a=f,a.g&&a.g.postMessage({type:"state",state:Db(a)}));g.ctrlKey||g.altKey&&!(a.a&2)?f=!1:(a.g&&a.g.postMessage({type:"click",click:g.keyCode}),f=Cb(a,g.keyCode))}else f=!1;f=!!f}}f?
(chrome.input.ime.keyEventHandled(e.requestId,f),wb()):(wb(),chrome.input.ime.keyEventHandled(e.requestId,f))},["async"]);chrome.inputMethodPrivate&&chrome.inputMethodPrivate.startIme&&chrome.inputMethodPrivate.startIme()})();
